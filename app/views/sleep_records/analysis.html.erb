<h2 class="responsive-title"><%= current_child.name %> の睡眠分析（直近1週間）</h2>

<div class="stats-grid sleep-summary-cards">
  <!-- 昼睡眠カード -->
  <div class="stat-card sleep-card">
    <h3>平均昼睡眠時間</h3>
    <% avg_day = @average_daytime_sleep.to_i %>
    <% avg_day_hours = avg_day / 60 %>
    <% avg_day_minutes = avg_day % 60 %>
    <p class="stat-value"><%= avg_day_hours %>時間<%= avg_day_minutes %>分</p>
    <span class="stat-sub">記録日数: <%= @daytime_record_days %>日 / 7日間</span>
  </div>

  <!-- 夜睡眠カード -->
  <div class="stat-card sleep-card">
    <h3>平均夜睡眠時間</h3>
    <% avg_night = @average_nighttime_sleep.to_i %>
    <% avg_night_hours = avg_night / 60 %>
    <% avg_night_minutes = avg_night % 60 %>
    <p class="stat-value"><%= avg_night_hours %>時間<%= avg_night_minutes %>分</p>
    <span class="stat-sub">記録日数: <%= @nighttime_record_days %>日 / 7日間</span>
  </div>

  <!-- 集計期間カード -->
  <div class="stat-card sleep-card">
    <h3>集計期間</h3>
    <p class="stat-value"><%= @start_date.strftime("%Y-%m-%d") %> 〜 <%= @end_date.strftime("%Y-%m-%d") %></p>
  </div>
</div>

<canvas id="dailySleepChart"
        width="400" height="300"
        data-dates='<%= @daily_sleep.map { |d| d[:date] }.to_json %>'
        data-daytime='<%= @daily_sleep.map { |d| d[:daytime] }.to_json %>'
        data-nighttime='<%= @daily_sleep.map { |d| d[:nighttime] }.to_json %>'
        data-naps='<%= @daily_sleep.map { |d| d[:naps] }.to_json %>'>
</canvas>