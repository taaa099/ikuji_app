<h2 class="profile-title">アカウント設定</h2>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, multipart: true, class: "profile-form-container" }) do |f| %>

  <% if resource.errors.any? %>
    <div class="alert alert-danger">
      <h4>入力に問題があります:</h4>
      <ul>
        <% resource.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- アバター -->
  <div class="profile-avatar-wrapper">
    <%= f.file_field :avatar, id: "avatar_input", class: "profile-avatar-input" %>
    <label for="avatar_input" class="profile-avatar-label">
      <% if resource.avatar.attached? %>
        <%= image_tag resource.avatar.variant(resize_to_limit: [120, 120]), class: "profile-avatar-img" %>
      <% else %>
        <%= image_tag "default_avatar.png", class: "profile-avatar-img" %>
      <% end %>
      <i class="fa fa-camera profile-avatar-camera"></i>
    </label>
  </div>

  <!-- 名前 -->
  <div class="profile-form-group">
    <%= f.label :name, "名前", class: "profile-form-label" %>
    <%= f.text_field :name, autofocus: true, class: "profile-form-input" %>
  </div>

  <!-- メール -->
  <div class="profile-form-group">
    <%= f.label :email, "メールアドレス", class: "profile-form-label" %>
    <%= f.email_field :email, class: "profile-form-input" %>
  </div>

  <div class="profile-form-actions">
    <%= f.submit "更新する", class: "profile-form-btn" %>
  </div>
<% end %>

<div class="profile-divider-wrapper">
  <span class="profile-divider-text">または</span>
</div>

<div class="profile-form-actions profile-form-actions-inline" style="margin-top: 1rem;">
  <%= link_to "パスワード変更", edit_user_registration_path, class: "profile-form-btn" %>
  <%= link_to "アカウント削除", registration_path(resource_name), data: { confirm: "本当に削除しますか？" }, method: :delete, class: "profile-form-btn profile-form-btn-danger" %>
</div>